{"ast":null,"code":"import _defineProperty from\"/home/sketchbrahma/Desktop/movie-ap/movie-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/sketchbrahma/Desktop/movie-ap/movie-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/sketchbrahma/Desktop/movie-ap/movie-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/sketchbrahma/Desktop/movie-ap/movie-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/sketchbrahma/Desktop/movie-ap/movie-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import style from\"./Form.module.css\";import axios from\"axios\";import{ToastContainer,toast}from\"react-toastify\";import{useNavigate}from\"react-router-dom\";import{Spin}from\"antd\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Form=function Form(){var navigate=useNavigate(\"\");var _useState=useState({username:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),Userdata=_useState2[0],setUserdata=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),userNameError=_useState4[0],setuserNameError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),passwordError=_useState6[0],setPasswordError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];// token fetch\nvar gettoken=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var token;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://api.themoviedb.org/3/authentication/token/new?api_key=b7f77b88848378309fc867cd549a0964\");case 2:token=_context.sent;localStorage.setItem(\"token\",token.data.request_token);case 4:case\"end\":return _context.stop();}}},_callee);}));return function gettoken(){return _ref.apply(this,arguments);};}();var onchangehandler=function onchangehandler(e){setUserdata(_objectSpread(_objectSpread({},Userdata),{},_defineProperty({},e.target.name,e.target.value)));};var LoginHandeler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setLoading(true);setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var username,password,checkToken,data,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:username=Userdata.username,password=Userdata.password;if(!(username.trim()===\"\"||username!==\"pavankhatalesbt\")){_context2.next=7;break;}setuserNameError(true);toast.error(\"enter valid useaname\");setLoading(false);_context2.next=24;break;case 7:if(!(password.trim()===\"\"||password!==\"pavan@123\")){_context2.next=13;break;}setPasswordError(true);toast.error(\"enter valid password\");setLoading(false);_context2.next=24;break;case 13:_context2.next=15;return gettoken();case 15:checkToken=localStorage.getItem(\"token\");data={username:Userdata.username,password:Userdata.password,request_token:checkToken};_context2.next=19;return axios.post(\"https://api.themoviedb.org/3/authentication/token/validate_with_login?api_key=b7f77b88848378309fc867cd549a0964\",data);case 19:res=_context2.sent;console.log(res.data);setUserdata({username:\"\",password:\"\"});toast.success(\"Login Success\");navigate(\"/home\");case 24:case\"end\":return _context2.stop();}}},_callee2);})),1000);case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function LoginHandeler(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:style.formcontrol,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Sign in\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Sign in to your Self Service Portal\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:style.input,placeholder:\"Username\",name:\"username\",value:Userdata.username,onChange:onchangehandler,style:{\"margin\":\"30px 0\"}}),userNameError?/*#__PURE__*/_jsx(\"p\",{className:style.errorMessage,children:\"Invalid Username\"}):\"\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:style.input,placeholder:\"Password\",name:\"password\",value:Userdata.password,onChange:onchangehandler,style:{\"margin\":\"20px 0\"}}),passwordError?/*#__PURE__*/_jsx(\"p\",{className:style.errorMessage,children:\"Invalid Password\"}):\"\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{disabled:loading===true,className:style.button,onClick:LoginHandeler,children:loading?/*#__PURE__*/_jsx(Spin,{}):\"Log in\"})]}),/*#__PURE__*/_jsx(ToastContainer,{})]})});};export default Form;","map":{"version":3,"names":["React","useState","style","axios","ToastContainer","toast","useNavigate","Spin","Form","navigate","username","password","Userdata","setUserdata","userNameError","setuserNameError","passwordError","setPasswordError","loading","setLoading","gettoken","get","token","localStorage","setItem","data","request_token","onchangehandler","e","target","name","value","LoginHandeler","setTimeout","trim","error","checkToken","getItem","post","res","console","log","success","formcontrol","input","errorMessage","button"],"sources":["/home/sketchbrahma/Desktop/movie-ap/movie-app/src/components/Form/Form.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport style from \"./Form.module.css\";\nimport axios from \"axios\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Spin } from \"antd\";\n\nconst Form = () => {\n  const navigate = useNavigate(\"\");\n\n  const [Userdata, setUserdata] = useState({\n    username: \"\",\n    password: \"\",\n  });\n\n  const [userNameError, setuserNameError] = useState(false);\n  const [passwordError, setPasswordError] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  // token fetch\n  const gettoken = async () => {\n    const token = await axios.get(\n      \"https://api.themoviedb.org/3/authentication/token/new?api_key=b7f77b88848378309fc867cd549a0964\"\n    );\n    localStorage.setItem(\"token\", token.data.request_token);\n  };\n\n  const onchangehandler = (e) => {\n    setUserdata({ ...Userdata, [e.target.name]: e.target.value });\n  };\n\n  const LoginHandeler = async () => {\n    setLoading(true);\n\n    setTimeout(async () => {\n      const { username, password } = Userdata;\n\n      if (username.trim() === \"\" || username !== \"pavankhatalesbt\") {\n        setuserNameError(true);\n        toast.error(\"enter valid useaname\");\n        setLoading(false);\n      } else if (password.trim() === \"\" || password !== \"pavan@123\") {\n        setPasswordError(true);\n        toast.error(\"enter valid password\");\n        setLoading(false);\n      } else {\n        await gettoken();\n        const checkToken = localStorage.getItem(\"token\");\n\n        const data = {\n          username: Userdata.username,\n          password: Userdata.password,\n          request_token: checkToken,\n        };\n        const res = await axios.post(\n          \"https://api.themoviedb.org/3/authentication/token/validate_with_login?api_key=b7f77b88848378309fc867cd549a0964\",\n          data\n        );\n\n        console.log(res.data)\n\n        setUserdata({\n          username: \"\",\n          password: \"\",\n        });\n\n        toast.success(\"Login Success\");\n        navigate(\"/home\");\n      }\n    }, 1000);\n  };\n  return (\n    <>\n      <section>\n        <div className={style.formcontrol}>\n          <h1>Sign in</h1>\n          <p>Sign in to your Self Service Portal</p>\n\n          <input\n            type=\"text\"\n            className={style.input}\n            placeholder=\"Username\"\n            name=\"username\"\n            value={Userdata.username}\n            onChange={onchangehandler}\n            style={{\"margin\":\"30px 0\"}}\n          />\n          {userNameError ? (\n            <p className={style.errorMessage}>Invalid Username</p>\n          ) : (\n            \"\"\n          )}\n          <br />\n          <input\n            type=\"password\"\n            className={style.input}\n            placeholder=\"Password\"\n            name=\"password\"\n            value={Userdata.password}\n            onChange={onchangehandler}\n            style={{\"margin\":\"20px 0\"}}\n\n          />\n          {passwordError ? (\n            <p className={style.errorMessage}>Invalid Password</p>\n          ) : (\n            \"\"\n          )}\n\n          <br />\n          <button\n            disabled={loading === true}\n            className={style.button}\n            onClick={LoginHandeler}\n          >\n            {loading ? <Spin /> : \"Log in\"}\n          </button>\n        </div>\n        <ToastContainer />\n      </section>\n    </>\n  );\n};\n\nexport default Form;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}